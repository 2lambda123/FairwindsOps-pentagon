#
# Copyright 2017 Reactive Ops Inc.
#
# Licensed under the Apache License, Version 2.0 (the “License”);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an “AS IS” BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
---
env: admin
# aws_key_name: "shareddev.admin-vpn"
aws_key_name: '<PLACEHOLDER>.admin-vpn'

# Todo do a lookup on the ami
default_ami: 'ami-49c9295f'

# VPN
openvpn_key_country: US
openvpn_key_province: NY
openvpn_key_city: New York
openvpn_key_org: KO
openvpn_key_email: admin-dev@example.net
openvpn_use_pam: no

openvpn_host: "vpn-{{ org_name }}.{{ canonical_zone }}"
openvpn_client_create_gateway_config: no

vpn_bucket: "{{ org_name }}-vpn"

openvpn_s3_conf_path: "s3://{{ vpn_bucket }}/stacks/vpn"
# the pool of IP addresses that the VPN server manages
openvpn_server: 172.16.137.0 255.255.255.0

# the second line is the route from a VPN client to the VPC
openvpn_server_options:
  - 'up /etc/openvpn/server.up.sh'
  - 'push "route 172.20.0.0 255.255.0.0"'

openvpn_create_server_up: yes

openvpn_clients:
  - 'vpn-user1'
  - 'vpn-user2'
  - 'vpn-user3'
